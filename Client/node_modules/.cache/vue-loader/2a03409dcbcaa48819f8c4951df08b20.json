{"remainingRequest":"/Users/pratikaher/VueProjects/feedbackfrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pratikaher/VueProjects/feedbackfrontend/src/components/Cropper.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/pratikaher/VueProjects/feedbackfrontend/src/components/Cropper.vue","mtime":1611396017341},{"path":"/Users/pratikaher/VueProjects/feedbackfrontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pratikaher/VueProjects/feedbackfrontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/pratikaher/VueProjects/feedbackfrontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pratikaher/VueProjects/feedbackfrontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDcm9wcGVyIGZyb20gJ2Nyb3BwZXJqcyc7Cgp2YXIgZGF0YSA9IHsgCiAgY29vcmRzOiB7IHg6IDAsIHk6IDAsIHdpZHRoOiAwLCBoZWlnaHQ6IDAsIHJvdGF0ZTogMCwgc2NhbGVYOiAwLCBzY2FsZVk6IDAgfSwKICBpbWFnZVNyYzogJ2h0dHBzOi8vaS5pbWd1ci5jb20vZkh5RU1zbC5qcGcnLAogIGNyb3BwZXI6IG51bGwKfQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDcm9wcGVyJywKCiAgZGF0YSgpIHsKICAgICAgcmV0dXJuIGRhdGE7CiAgfSwKCiAgbWV0aG9kczogewogICAgb25TZWxlY3RJbWFnZTogZnVuY3Rpb24oJGV2ZW50KSB7CiAgICAgIGxldCBpbWcgPSAkZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgICBsZXQgdG1wcGF0aCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoaW1nKTsKICAgICAgZGF0YS5pbWFnZVNyYyA9IHRtcHBhdGg7CiAgICAgIAogICAgICBkYXRhLmNyb3BwZXIucmVwbGFjZShkYXRhLmltYWdlU3JjKTsKICAgIH0sCiAgICBvbkNyb3A6IGZ1bmN0aW9uKCRldmVudCkgewogICAgICBjb25zb2xlLmxvZygkZXZlbnQpCiAgICAgIC8vaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzU2MTM3OTkvY2hhbmdlLWltYWdlLW9iamVjdC1kaW1lbnNpb25zLXdpZHRoLWFuZC1oZWlnaHQKICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3Jyk7CiAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICBpbWcuc3JjID0gZGF0YS5pbWFnZVNyYzsKICAgICAgCiAgICAgIGNhbnZhcy53aWR0aCAgPSBpbWcud2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0OwogICAgICAKICAgICAgbGV0IHcgPSBpbWcud2lkdGg7CiAgICAgIGxldCBoID0gaW1nLmhlaWdodDsKCiAgICAgIC8vIHJlc2l6ZSBpbWcgdG8gZml0IGluIHRoZSBjYW52YXMgCiAgICAgIC8vIFlvdSBjYW4gYWx0ZXJuYXRlbHkgcmVxdWVzdCBpbWcgdG8gZml0IGludG8gYW55IHNwZWNpZmllZCB3aWR0aC9oZWlnaHQKICAgICAgbGV0IHNpemVyID0gdGhpcy5zY2FsZVByZXNlcnZlQXNwZWN0UmF0aW8odywgaCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgCiAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCBkYXRhLmNvb3Jkcy54LCBkYXRhLmNvb3Jkcy55LCBkYXRhLmNvb3Jkcy53aWR0aCwgZGF0YS5jb29yZHMuaGVpZ2h0LCAwLCAwLCB3ICogc2l6ZXIsIGggKiBzaXplcik7CiAgICB9LAogICAgc2NhbGVQcmVzZXJ2ZUFzcGVjdFJhdGlvOiBmdW5jdGlvbihpbWdXLCBpbWdILCBtYXhXLCBtYXhIKSB7CiAgICAgIHJldHVybihNYXRoLm1pbigobWF4VyAvIGltZ1cpLCAobWF4SCAvIGltZ0gpKSk7CiAgICB9CgogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24oKSB7CiAgICBsZXQgaW1hZ2UgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2UnKTsKICAgIGRhdGEuY3JvcHBlciA9IG5ldyBDcm9wcGVyKGltYWdlLCB7CiAgICAgIGFzcGVjdFJhdGlvOiAxNiAvIDksCiAgICAgIGNyb3AoZSkgewogICAgICAgIGRhdGEuY29vcmRzLnggPSBlLmRldGFpbC54OwogICAgICAgIGRhdGEuY29vcmRzLnkgPSBlLmRldGFpbC55OwogICAgICAgIGRhdGEuY29vcmRzLndpZHRoID0gZS5kZXRhaWwud2lkdGg7CiAgICAgICAgZGF0YS5jb29yZHMuaGVpZ2h0ID0gZS5kZXRhaWwuaGVpZ2h0OwogICAgICAgIGRhdGEuY29vcmRzLnJvdGF0ZSA9IGUuZGV0YWlsLnJvdGF0ZTsKICAgICAgICBkYXRhLmNvb3Jkcy5zY2FsZVggPSBlLmRldGFpbC5zY2FsZVg7CiAgICAgICAgZGF0YS5jb29yZHMuc2NhbGVZID0gZS5kZXRhaWwuc2NhbGVZOwogICAgICB9CiAgICB9KTsKICB9Cgp9Cgo="},{"version":3,"sources":["Cropper.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Cropper.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"image-wrapper\"> \n    <img id=\"image\" :src=\"imageSrc\"> \n    </div>  \n    <canvas id=\"preview\"></canvas> \n    <br> \n    <button id=\"crop\" @click=\"onCrop($event)\">Crop</button> \n    <input type=\"file\" id=\"select-image\" accept=\"image/*\" @change=\"onSelectImage($event)\"> \n    </div>\n</template>\n\n<script>\nimport Cropper from 'cropperjs';\n\nvar data = { \n  coords: { x: 0, y: 0, width: 0, height: 0, rotate: 0, scaleX: 0, scaleY: 0 },\n  imageSrc: 'https://i.imgur.com/fHyEMsl.jpg',\n  cropper: null\n}\n\nexport default {\n  name: 'Cropper',\n\n  data() {\n      return data;\n  },\n\n  methods: {\n    onSelectImage: function($event) {\n      let img = $event.target.files[0];\n      let tmppath = URL.createObjectURL(img);\n      data.imageSrc = tmppath;\n      \n      data.cropper.replace(data.imageSrc);\n    },\n    onCrop: function($event) {\n      console.log($event)\n      //https://stackoverflow.com/questions/35613799/change-image-object-dimensions-width-and-height\n      let canvas = document.getElementById('preview');\n      let ctx = canvas.getContext('2d');\n      let img = new Image();\n      img.src = data.imageSrc;\n      \n      canvas.width  = img.width;\n      canvas.height = img.height;\n      \n      let w = img.width;\n      let h = img.height;\n\n      // resize img to fit in the canvas \n      // You can alternately request img to fit into any specified width/height\n      let sizer = this.scalePreserveAspectRatio(w, h, canvas.width, canvas.height);\n      \n      ctx.drawImage(img, data.coords.x, data.coords.y, data.coords.width, data.coords.height, 0, 0, w * sizer, h * sizer);\n    },\n    scalePreserveAspectRatio: function(imgW, imgH, maxW, maxH) {\n      return(Math.min((maxW / imgW), (maxH / imgH)));\n    }\n\n  },\n  mounted: function() {\n    let image    = document.getElementById('image');\n    data.cropper = new Cropper(image, {\n      aspectRatio: 16 / 9,\n      crop(e) {\n        data.coords.x = e.detail.x;\n        data.coords.y = e.detail.y;\n        data.coords.width = e.detail.width;\n        data.coords.height = e.detail.height;\n        data.coords.rotate = e.detail.rotate;\n        data.coords.scaleX = e.detail.scaleX;\n        data.coords.scaleY = e.detail.scaleY;\n      }\n    });\n  }\n\n}\n\n</script>\n\n<style>\nimg {\n  max-width: 100%; /* This rule is very important, please do not ignore this! */\n}\n\n#preview {\n  width:  256px;\n  height: 144px;\n  border: 1px solid;\n  display: inline-block;\n}\n\n.image-wrapper {\n  width: 600px; \n  height: auto; \n  display: inline-block;\n}\n\n</style>\n"]}]}